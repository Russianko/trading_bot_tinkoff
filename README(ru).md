Grid Trading Bot + GUI (private)

Дисклеймер: проект намерено урезанный. Торговля на любом боте несёт риск потери средств.  
Не является инвест-рекомендацией. Используйте на тестовом счёте или минимальных объёмах.

## Коротко
Сеточный торговый бот (grid) + GUI-панель (PyQt5) для управления параметрами по тикерам.  
Проект хранит конфигурации и runtime-состояние локально в папке "data/", поддерживает логи и историю событий.

---

## Структура проекта

├─ bot.py
├─ trading_api.py
├─ misc.py
├─ trade_db.py                 # вариант с SQLite (fills + отчёты)
├─ Settings.py
├─ config.py
├─ UI.py                       # логика GUI
├─ qUI.py                      # автосгенерённый UI (pyuic5)
├─ main.ui                     # исходник Qt Designer
├─ run_bot.bat
├─ run_panel.bat
├─ setup.bat
├─ update.bat
├─ installPython.txt
└─ data/
   ├─ API.txt                  # (локально) ключи/доступы
   ├─ couples.txt              # (локально) параметры/тикеры
   ├─ settings.txt             # (локально) настройки
   ├─ logs/
   │  ├─ error_log.jsonl
   │  └─ operation_log.jsonl
   ├─ orders/                  # (опционально) JSON-карточки ордеров
   └─ clearing/                # (опционально) снапшоты/сервисные файлы


## Быстрый запуск (Windows)

### 1) Установить Python
Рекомендуется Python 3.11.  
Заметки: `installPython.txt`.

### 2) Поставить зависимости
запустить setup.bat

### 4) Запуск

GUI:
run_panel.bat(win)
run_panel.sh(lin)
Бот:
run_bot.bat(win)
run_bot.sh(lin)

GUI меняет конфиг тикеров (data/couples.txt) и команды пользователя сохраняются через Settings.py
бот читает конфиг и выполняет торговую логику

Конфигурации и состояние
Конфигурации тикеров: data/couples.txt

### 5) Конфигурация и состояние:
В GUI записываются параметры тикера (типовой набор):

enable (ON/OFF)
symbol (тикер)
side (long/short)
size (лоты на заявку)
step_orders (шаг сетки в шагах цены инструмента)
quantity_orders (кол-во уровней сетки)
TP (шаг тейк-профита)

дополнительные поля (лимиты/stop_loss/особые режимы) — зависят от ветки проекта

### 6) Runtime-состояние: data/settings.txt

Используется ботом для хранения внутреннего состояния между итерациями:
какие уровни/ордера уже выставлены
какие события уже обработаны
внутренние флаги и кэши

### 7) Логи и диагностика

data/logs/error_log.jsonl — ошибки
data/logs/operation_log.jsonl — события/операции

Если включена история ордеров:
data/orders/*.json — “карточки” ордеров и события по ним

### 8) Архитектура (очень кратко)

bot.py — основная доменная логика: сетка, сопровождение, лимиты, реакции на исполнение/восстановления.

trading_api.py — интерфейс к брокеру и операции низкого уровня (ордера/позиции/приведение цены к шагу).

Settings.py + data/ — локальное файловое хранилище конфигов и состояния (удобно для отладки).

UI.py / qUI.py — GUI для управления параметрами и ручных команд.

## Ветка/версия с SQLite (история заявок)

В проекте существует альтернативная версия, где история заявок и их статусы хранятся не в JSON-файлах (`data/orders/*.json`), а в SQLite базе data.db.  
Цель перехода: получить единое хранилище для всех созданных/исполненных/отменённых заявок и удобные выборки (по тикеру, статусу, периоду, PnL, причинным событиям).

### Почему SQLite вместо JSON
- Быстрые запросы: “все FILLED за неделю”, “заявки без TP”, “частичные исполнения”
- Меньше файлового шума и риска “сломанных” JSON при падении процесса
- Можно строить отчёты и статистику без отдельного парсинга каталогов

### Где лежит база
Обычно база хранится в "data/"(пример):
- "data/data.db"


### Что в базе хранится (концептуально)
Типовой набор сущностей:
- orders: все заявки (созданные/активные/закрытые)
- fills/executions: исполнения (включая частичные)
- events/log: события жизненного цикла (создание, отмена, изменение, ошибки)
- positions/snapshots: снимки позиций для восстановления/аналитики

